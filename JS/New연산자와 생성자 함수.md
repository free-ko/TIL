# New 연산자와 생성자 함수

- 객체 리터럴 `{...}`을 사용하면 객체를 쉽게 만들 수 있습니다.
- 그런데 개발을 하다 보면 유사한 객체를 여러 개 만들어야 할 때가 생기곤 합니다.
- 복수의 사용자, 메뉴 내 다양한 아이템을 객체로 표현하려고 하는 경우 말입니ㅏ.
- 이 때 `new` 연산자와 생성자 함수를 사용하면 유사한 객체 여러 개를 쉽게 만들 수 있습니다.

## 생성자 함수

- 생성자 함수와 일반 함수에는 기술적 차이는 없습니다.
- 생성자 함수는 함수 이름의 첫 글자를 `대문자`로 시작합니다.
- 반드시 `new` 연산자를 붙여 실행합니다.

```js
// 빈 객체를 만들어 this에 할당합니다.
// 함수 본문을 실행합니다.
// this에 새로운 프로퍼티를 추가해 this를 수정합니다.
// this를 반환합니다.
function User(naem) {
  // this = {}; 빈 객체가 암시적으로 만들어짐
  this.name = name;
  this.isAdmin = false;

  // return this; this가 암시적으로 반환 됨
}

let user = new User("ko");

alert(user.name); // ko
alert(user.isAdmin); // false
```

<br>

- 밑에 생성자 함수는 익명 함수이기 때문에 어디에도 저장되지 않습니다.
- 처음 만들 때 부터 단 한 번만 호출할 목적으로 만들었기 때문에 재 사용이 불가능 합니다.
- 이렇게 익명 생성자 함수를 이용 하면 재사용은 막으면서 코드를 `캡슐화`할 수 있습니다.

```js
lset user = new function() {
    this.name = 'ko';
    this.isAdmin = false;

    // 사용 객체를 만들기 위한 여러 코드,
    // 지역 변수, 복잡한 로직, 구문 등의
    // 다양한 코드가 여기에 들어 갑니다.
}
```

<br>

## 생성자와 return문

- 생성자 함수엔 보통 `return`문이 없습니다.
- 반환해야 할 것들을 모두 `this`에 저장되고, `this`는 자동으로 반환되기 때문에 반환문을 명시적으로 써줄 필요가 없습니다.

<br>

## 생성자 내 메서드

- 생성자 함수를 사용하면 개개변수를 이용해 객체 내부를 자유롭게 구성할 수 있습니다.

```js
function User(name) {
  this.name = name;

  this.sayHi = function () {
    alert("Hi" + this.name);
  };
}

let ko = new User("ko");

ko.sayHi(); // Hi ko
```

<br>

## 요약

- 생성자 함수는 일반 함수 입니다.
- 다만 일반 함수와 구분하기 위해 함수 이름 첫 글자를 대문자로 씁니다.
- 생성자 함수는 반드시 `new`연산자와 함께 호출해야 합니다.
- `new`와 함께 호출하면 내부에서 `this`가 암시적으로 만들어지고, 마지막엔 `this`가 반환됩니다.
- 유사한 객체를 만들 때 생성자 함수가 유용합니다.

[참고]
https://ko.javascript.info/constructor-new
