# 참조 타입

- 복잡한 상황에서 메서드를 호출하면 `this` 값을 잃어버리는 경우가 생깁니다.

```js
let user = {
  name: "John",
  hi() {
    alert(this.name);
  },
  bye() {
    alert("Bye");
  },
};

user.hi(); // John (간단한 호출은 의도한 대로 잘 동작합니다.)

// name에 따라 user.hi나 user.bye가 호출되게 해봅시다.
(user.name == "John" ? user.hi : user.bye)(); // TypeError: Cannot read property 'name' of undefined
```

- 마지막 줄에서 조건부 연산자를 사용해 `user.hi`나 `user.bye` 중 하나가 호출되도록 했습니다.
- `user`의 `name`이 `"John"`이므로 `user.hi`가 호출될 것이라 예상하며 말이죠.
- 그런데 에러가 발생했습니다. 뒤에``()`가 있어서 메서드 `hi`가 즉시 호출될 것이라 예상했는데 원하는 대로 되지 않았네요.
- 에러는 메서드를 호출할 때 `"this"`에 `undefined`가 할당되었기 때문에 발생했습니다.
- 마지막 줄이 아래와 같았다면 에러 없이 잘 작동했을 겁니다.

```js
user.hi();
```

- 그런데 아래 코드에선 에러가 발생하죠.

```js
(user.name == "John" ? user.hi : user.bye)();
```

- 원인이 뭘까요? 원인을 알려면 `obj.method()`를 호출했을 때, 내부에서 어떤 일이 일어나는지 알아야 합니다.

<br>

## 참조 타입 자세히 알아보기

<br>

[출처]
https://ko.javascript.info/reference-type
