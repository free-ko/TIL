# 네이티브 프로토 타입

- `prototype` 프로퍼티는 자바스크립트 내부에서도 광범위하게 사용됩니다.
- 모든 내장 생성자 함수에서 `prototype` 프로퍼티를 사용하죠.
- 첫 번째로 자세히 살펴본 다음 어떻게 내장 객체에 새 기능을 추가하여 프로토타입 프로퍼티를 사용하는지 알아보겠습니다.

<br>

## Object.prototype

- 빈 객체를 표현한다고 해 봅시다.

```js
let obj = {};
alert(obj); // "[object Object]" ?
```

- `"[object Object]"` 문자열을 생성하는 코드는 어디에 있을까요?
- `toString` 메서드에서 이 문자열을 생성한다는 것을 앞서 배워서 알고 있지만 도대체 코드는 어디에 있는 걸까요? `obj`는 비어 있는데 말이죠.
- `obj = new Object()`를 줄이면 `obj = {}`가 됩니다.
- 여기서 `Object`는 내장 객체 생성자 함수인데, 이 생성자 함수의 `prototype`은 `toString`을 비롯한 다양한 메서드가 구현되어있는 거대한 객체를 참조합니다.
- `new Object()`를 호출하거나 리터럴 문법 `{...}`을 사용해 객체를 만들 때, 새롭게 생성된 객체의 `[[Prototype]]`은 규칙에 따라 `Object.prototype`을 참조합니다.
- 따라서 `obj.toString()`을 호출하면 `Object.prototype`에서 해당 메서드를 가져오게 되죠.

```js
let obj = {};

alert(obj.__proto__ === Object.prototype); // true

alert(obj.toString === obj.__proto__.toString); //true
alert(obj.toString === Object.prototype.toString); //true
```

- 그런데 이때 `Object.prototype` 위의 체인엔 `[[Prototype]]`이 없다는 점을 주의하셔야 합니다.

```js
alert(Object.prototype.__proto__); // null
```

<br>

## 다른 내장 프로토타입

- `Array, Date, Function`을 비롯한 내장 객체들 역시 프로토타입에 메서드를 저장해 놓습니다.
- 배열 `[1, 2, 3]`을 만들면 기본 `new Array()` 생성자가 내부에서 사용되기 때문에 `Array.prototype`이 배열 `[1, 2, 3]`의 프로토타입이 되죠.
- `Array.prototype`은 배열 메서드도 제공합니다. 이런 내부 동작은 메모리 효율을 높여주는 장점을 가져다줍니다.
- 명세서에선 모든 내장 프로토타입의 꼭대기엔 `Object.prototype`이 있어야 한다고 규정합니다.
- 이런 규정 때문에 몇몇 사람들은 `"모든 것은 객체를 상속받는다."`라는 말을 하죠.
- 각 내장 객체의 프로토타입을 확인해 보겠습니다.

```js
let arr = [1, 2, 3];

// arr은 Array.prototype을 상속받았나요?
alert(arr.__proto__ === Array.prototype); // true

// arr은 Object.prototype을 상속받았나요?
alert(arr.__proto__.__proto__ === Object.prototype); // true

// 체인 맨 위엔 null이 있습니다.
alert(arr.__proto__.__proto__.__proto__); // null
```

- 체인 상의 프로토타입엔 중복 메서드가 있을 수 있습니다.
- `Array.prototype`엔 요소 사이에 쉼표를 넣어 요소 전체를 합친 문자열을 반환하는 자체 메서드 `toString`가 있습니다.

```js
let arr = [1, 2, 3];
alert(arr); // 1,2,3 <-- Array.prototype.toString 의 결과
```

- 그런데 `Object.prototype`에도 메서드 `toString`이 있습니다.
- 이렇게 중복 메서드가 있을 때는 체인 상에서 가까운 곳에 있는 메서드가 사용됩니다.
- `Array.prototype`이 체인 상에서 더 가깝기 때문에 `Array.prototype`의 `toString`이 사용되죠.

[출처]
https://ko.javascript.info/native-prototypes
