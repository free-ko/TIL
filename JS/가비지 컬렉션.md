# 가비지 컬렉션

- JS는 눈에 보이지 않는 곳에서 메모리 관리를 수행함
- 가비지 컬렉터는 모든 객체를 모니터링하고, 도달 할 수 없는 객체는 삭제 함
- 원시 값, 객체, 함수 등 우리가 만드는 모든 것은 메모리를 차지 함
- 어떻게 JS엔진이 필요 없는 것을 찾아서 삭제하는가??

## 가비지 컬렉션 기준

- JS는 `도달 가능성(Reachability)`이라는 개념을 사용해 메모리 관리를 수행함
- `도달 가능한(Reachable)` 값은 쉽게 말해 어떻게든 접근하거나 사용할 수 있는 값
- 즉 `도달 가능한(Reachable)`은 메모리에서 삭제되지 않음

### 도달 가능한 것들(이유 없이 삭제되지 않음) = 루트(Root)

- `루트가 참조하는 값`이나 `체이닝으로 루트에서 참조할 수 있는 값`은 도달 가능한 값
- 현재 함수의 `지역 변수`와 `매개변수`
- 중첩 함수의 체인에 있는 함수에서 사용되는 `변수와 매개변수`
- 전역 변수
- 기타 등등

### 예시

- 참조 1개

```js
// user엔 객체 참조 값이 저장됩니다.
// 즉 user는 {name: "free"}이라는 객체를 참조 합니다.
let user = {
  name: "free",
};

// 그런데 user의 다른 값으로 덮어쓰면 참조가 사라집니다.
user = null;

// 이렇게 되면 free에 도달 할 수 없는 상태가 되고
// free에 접근할 방법고, free를 참조 하는 것도 모두 사라집니다.
// 결국 가비지 컬렉터는 이제 free에 저장된 데이터를 삭제하고, free을 메모리에서 삭제합니다.
```

<br>

- 참조 2개

```js
// user엔 객체 참조 값이 저장됩니다.
let user = {
  name: "John",
};

// user의 값을 다른 값으로 덮어 써 봅시다.
let admin = user;

// 전역 변수 admin을 통하면 여전히 객체 John에 접근할 수 있기 때문에 John은 메모리에서 삭제되지 않습니다.
// 이 상태에서 admin을 다른 값(null 등)으로 덮어쓰면 John은 메모리에서 삭제될 수 있습니다.
user = null;
```

[출처]
https://ko.javascript.info/garbage-collection
